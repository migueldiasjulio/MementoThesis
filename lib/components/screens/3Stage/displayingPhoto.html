<link rel="import" href="../../../../../packages/polymer/polymer.html">
<link rel="import" href="../polymerElements/emptySpaceAndMessage/emptySpaceAndMessage.html">
<link rel="import" href="../polymerElements/nothingToShowMessage/nothingToShowMessage.html">
<link rel="import" href="../polymerElements/movingElements/moveOptions.html">
<link rel="import" href="../polymerElements/categories/categories.html">
<link rel="import" href="../polymerElements/lastScreenPhotoInfo/lastPhoto.html">
<link rel="import" href="auxiliarElements/containerPhotos/containerPhotos.html">
<polymer-element name="displaying-photo"> 
<template>
<link rel="stylesheet" href="displayingPhoto.css">
  <link rel="stylesheet" href="../resources/mementoButtons.css">
  <link rel="stylesheet" href="../resources/mementoTabs.css">
  <link rel="stylesheet" href="../resources/mementoGrid.css">
  <link rel="stylesheet" href="../resources/mementoPosition.css">
  <link rel="stylesheet" href="../resources/mementoSize.css">
  <link rel="stylesheet" href="../resources/arrowNavigation.css">

  <div id="main">
    <section id="firstSection">   
      <div class="row">
          <div class="col col-xs-1 col-sm-1 col-md-1 col-lg-1">
            <div>
              <button type="button" class="btn btn-summary btn-md"
                      on-click="{{returnToSummary}}" >
                <span class="glyphicon glyphicon-arrow-left"></span> Back
              </button>
            </div>
          </div>
          <div class="col col-xs-11 col-sm-11 col-md-11 col-lg-11">
              
                  <div id="centerText">
                  
                   <form class="form-inline" role="form">
                   
                     <div class="row">
                     
                     <div class="col col-xs-1 col-sm-1 col-md-1 col-lg-1"></div>
                     <div class="col col-xs-8 col-sm-8 col-md-8 col-lg-8">
                      <div class="btn-group">
                        <template if="{{currentContainer.photosToDisplay.length > 1}}">
                         <img src="../../../resources/images/back.png" 
                         on-click="{{previousPhotoInList}}" 
                         class="arrowCursor" id="arrowSize"  />
                        </template>
                            <img id="{{photo.id}}" class="imageDisplay imageDisplaying" src="{{photo.mainSrc}}" >
                        <template if="{{currentContainer.photosToDisplay.length > 1}}">
                          <img src="../../../resources/images/forward.png" 
                               on-click="{{nextPhotoInList}}" 
                               class="arrowCursor" 
                               id="arrowSize"  /> 
                        </template>
                        <p id="centerText">{{photo.title}}</p> 
                      </div>   
                     </div>
                     <div class="col col-xs-3 col-sm-3 col-md-3 col-lg-3">
                      <div style="float: left;">
                        <div style="margin-top: 40%"></div>
                        <div>
                          <last-photo-info-element photo="{{photo}}"></last-photo-info-element>
                        </div>
                        <div style="margin-top: 40%"></div>
                      </div>
                     </div>
                     
                     </div>        
                   </form> 
 
                  </div>    
          </div> <!-- image zone -->
      </div>
    </section> <!-- firstSection -->
    
    <section id="screenFooter"> 
     <div id="categories">
      <categories-element 
      sameCategory="{{sameCategory}}" 
      facesCategory ="{{facesCategory}}"
      dayMomentCategory="{{dayMomentCategory}}"
      toningCategory="{{toningCategory}}"
      facesCategoryExecutionFunction="{{facesCategoryExecutionFunction}}"
      dayMomentCategoryExecutionFunction="{{dayMomentCategoryExecutionFunction}}"
      toningCategoryExecutionFunction="{{toningCategoryExecutionFunction}}"
      similarCategoryExecutionFunction="{{similarCategoryExecutionFunction}}">
      </categories-element>
     </div>
      
      <div id="BigSizeTabs">
        <section id="tabbed">        
                    <!-- Tab input and label -->
        <template repeat="{{container in containers}}">
          <input id="t-{{container.name}}" name="tabbed-tabs" type="radio" style="display: none;
                                                                 visibility: hidden;
                                                                 opacity: 0;"
                                                                 on-click="{{selectContainer}}"
                                                                 data-container="{{container.name}}"/>
          <label style="width: 200px" for="t-{{container.name}}" class="{{container.name}}">
              {{container.name.toLowerCase()}}
              <span style="float: right; margin-top: 10px;" id="span" class="badge">
                <strong style="padding:2px">{{container.photosToDisplay.length}}</strong>
              </span>
          </label>
        </template>
     
            <!-- Tabs wrapper -->
            <div class="wrapper" id="wrapperZone">
            
           <template repeat="{{container in containers}}">
            <!-- Tab content -->
            <div id="{{container.secondname}}" class="{{container.secondname}}">
              <template if="{{insideGroup}}">
                <img src="../../../resources/images/close.png"
                     on-click="{{getOutOfGroupInDisplayMode}}"
                     class="topIndex 40pxSquare" >
              </template>
              <template id="firstTemplate" if="{{currentContainer.photos.isEmpty}}">
                  <empty-message></empty-message>
              </template>
              <template id="secondTemplate-{{container.name}}" if="{{currentContainer.photos.isNotEmpty}}">
                <div class="row">
                  <div class="col col-xs-12 col-sm-12 col-md-12 col-lg-12"> 
                    <template if="{{container.photosToDisplay.length < 1}}">
                      <nothing-to-show></nothing-to-show>
                    </template>    
                    <section id="centeringStuff" class="centerStuff">
                      <template if="{{container.photosToDisplay.length > 0}}">
                      
                       <last-screen-photos 
                          photo="{{photo}}"
                          photosToDisplay="{{currentContainer.photosToDisplay}}"
                          container="{{container}}"
                          insideGroup="{{insideGroup}}"
                          sameCategory="{{sameCategory}}"
                          showImageFunction="{{showImageFunction}}"   
                          toningCategory="{{toningCategory}}"
                          facesCategory="{{facesCategory}}"
                          dayMomentCategory="{{dayMomentCategory}}"
                          needToCheckOverflow="{{needToCheckOverflow}}"
                          currentContainer="{{currentContainer}}"
                          markNewPhoto="{{markNewPhoto}}">
                        </last-screen-photos> 
                        
                      </template>
                    </section> 
                  </div>
                </div>
              </template>
            </div> <!-- container -->
          </template><!-- / Tab content -->
            </div> <!-- / Tabs wrapper -->      
          </section>
         </div>

      <div id="screenFooterButtons"> <!-- screen footer -->
       <form class="form-inline" role="form"> <!-- form -->
          <template if="{{!selection}}">
            <div style="float: left" class="btn-group">
              <button type="button" id="Button130"
              on-click="{{enableSelection}}"
                class="btn btn-summary btn-md">Select</button>
            </div>
            <template if="{{summaryContainer.photos.length > 0}}">
              <div style="float: right" class="btn-group">
                <button type="button" on-click="{{exportSummary}}"
                  id="Button130" class="btn btn-summary btn-md">Export
                </button>
              </div>
           </template>
         </template> <!-- normal state -->
    
         <template if="{{selection}}">
          <div class="row">
            <div class="col col-xs-5 col-sm-4 col-md-3 col-lg-1"> 
             
                <template if="{{selectedPhotos.length > 0}}">
                  <div style="float: left" class="btn-group">
                    <button type="button" id="Button130"
                            on-click="{{disableSelection}}"
                            class="btn btn-summary btn-md">Cancel
                    </button>
                  </div>
                </template>
                
                <template if="{{selectedPhotos.length < 1}}">
                  <div style="float: left" class="btn-group">
                    <button type="button" id="Button130"
                            on-click="{{disableSelection}}"
                            class="btn btn-summary btn-md">Done
                    </button>
                  </div>
                </template>
            </div>
            <div class="col col-xs-7 col-sm-8 col-md-9 col-lg-11">
              <template if="{{selectedPhotos.length > 0}}">
                <div id="centerText">
                  <template if="{{!insideGroup && !toningCategory && !facesCategory && !dayMomentCategory}}"> <!-- hack -->
                  Move <strong>{{selectedPhotos.length}} photos</strong> to
                  </template>
                  <template if="{{facesCategory || toningCategory || dayMomentCategory}}">
                    <template if="{{!insideGroup}}">
                    Move <strong>{{selectedPhotos.length}} groups</strong> to 
                    </template>
                    <template if="{{insideGroup}}">
                    Move <strong>{{selectedPhotos.length}} photos</strong> to 
                    </template>
                  </template> 
                  
                  <move-options moveToContainerFunction="{{moveToContainerFunction}}"
                  currentContainer="{{currentContainer}}"
                  summaryContainer="{{summaryContainer}}"
                  standbyContainer="{{standbyContainer}}"
                  excludedContainer="{{excludedContainer}}"
                  ></move-options>
                  
                  container.
                 </div> 
                </template> <!-- container to move -->  
              </div> 
            </div>   
        </template> <!-- select state -->
       </form> <!-- form -->
      </div> <!-- screen footer -->
     </section>
     
       <div id="exportMenu" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 id="modalTitle" style="margin: 0">Memento - Export summary</h4>
            </div>
            <div class="modal-body">
                <div id="centerText">     
                      <a><img src="../../../resources/images/own_device.png" 
                      on-click="{{exportToHardDrive}}" id="exportImage" /></a>
                      <br/>
                      <br/>
                      <a><strong on-click="{{exportToHardDrive}}" >Download summary</strong></a>
                      <template if="{{downloading}}">
                        <br/>
                        <br/>
                        <strong>Please wait..</strong>
                        <br/>
                      </template>
                </div>
             </div>
             <div id="modalMargin1" class="modal-footer">
             <template if="{{downloading}}">
              <button class="btn btn-default" data-dismiss="modal">Cancel</button>
             </template>
             <template if="{{!downloading}}">
              <button class="btn btn-default" data-dismiss="modal">Close</button>
             </template>
            </div>
          </div>
        </div>
      </div> <!-- modal -->
      
  </div><!-- main --> 
</template> <!-- main template -->
<script type="application/dart" src="displayingPhoto.dart"></script> 
</polymer-element>