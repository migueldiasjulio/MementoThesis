<link rel="import" href="../../../../../packages/polymer/polymer.html">
<polymer-element name="summary-manipulation">
<template>
  <link rel="stylesheet" href="summaryManipulation.css">
  <link rel="stylesheet" href="../resources/mementoButtons.css">
  <link rel="stylesheet" href="../resources/mementoTabs.css">
  <link rel="stylesheet" href="../resources/mementoGrid.css">
  <link rel="stylesheet" href="../resources/mementoPosition.css">
  <link rel="stylesheet" href="../resources/mementoSize.css">
  
  <div id="main">
    <section id="firstSection">
      <div id="tabs">  
        <section id="tabbed">
        
      <!-- Tab input and label -->
      <template repeat="{{container in containers}}">
        <input id="t-{{container.name}}" name="tabbed-tabs" type="radio" 
                                                               style="display: none;
                                                               visibility: hidden;
                                                               opacity: 0;"                                                           
                                                               on-click="{{selectContainer}}"
                                                               data-container="{{container.name}}" />
        <label style="width: 200px" for="t-{{container.name}}" class="{{container.name}}">
            {{container.name.toLowerCase()}}
            <span style="float: right; margin-top: 10px;" id="span" class="badge">
              <strong style="padding:2px">{{container.photosToDisplay.length}}</strong>
            </span>
        </label>
      </template>
        
        <!-- Tabs wrapper -->
        <div class="wrapper" id="wrapperZone">
        
        <!-- Tab content -->
       <template repeat="{{container in containers}}">
       <div class="{{container.name}}">
        <template if="{{insideGroup}}">
          <img src="../../../resources/images/close.png"
               on-click="{{getOutOfGroup}}"
               style="width: 40px; height: 40px" >
          </template>
          <template if="{{currentContainer.photos.isEmpty}}">
            <div class="space40"></div> <!-- Just space -->
            <div id="centerText" class="title large font25 height20">Empty.</div>
            <div class="space40"></div> <!-- Just space -->
          </template>
          <template if="{{currentContainer.photos.isNotEmpty}}">
              <template if="{{container.photosToDisplay.length < 1}}">
                <div class="space40"></div> <!-- Just space -->
                <div id="centerText" class="title large font25 height20">Nothing to show.</div>
                <div class="space40"></div> <!-- Just space -->
              </template>
              <section class="centerStuff">
                <template if="{{container.photosToDisplay.length > 0}}">
                  <ul id="navlist">
                    <template repeat="{{photo in currentContainer.photosToDisplay}}">   
                      <li>
                      
                         <template if="{{insideGroup}}">
                          <div class="mementoImage">
                              <img src="{{photo.thumbnailToShow.src}}"
                                   class="image"
                                   on-click="{{showImage}}"
                                   data-id="{{photo.id}}" >
                              <img src="../../../resources/images/selected_blue.png"
                                   class="notSelected"
                                   on-click="{{showImage}}"
                                   data-id="{{photo.id}}"
                                   style="width: 40px; height: 40px" >
                            </div>
                         </template>
                         
                         <template if="{{facesCategory}}">
                          <template if="{{!insideGroup}}">
                           <div class="mementoImage">
                            <div on-click="{{showImage}}" data-id="{{photo.id}}">
                              <img src="{{photo.thumbnailToShow.src}}"
                                   class="imageGroupFace image"
                                   title="{{photo.title}}" >
                              <p id="text"><span class="label label-default">{{photo.returnFacesGroup.groupName}}</span></p>
                              <img src="../../../resources/images/selected_blue.png"
                                   class="notSelected"
                                   on-click="{{showImage}}"
                                   data-id="{{photo.id}}"
                                   style="width: 40px; height: 40px" >
                            </div>
                           </div>
                          </template>
                        </template>
                        
                        <template if="{{dayMomentCategory}}">
                          <template if="{{!insideGroup}}">
                           <div class="mementoImage">
                            <div on-click="{{showImage}}" data-id="{{photo.id}}">
                              <img src="{{photo.thumbnailToShow.src}}"
                                   class="imageGroupFace image"
                                   title="{{photo.title}}" >
                              <p id="text"><span class="label label-default">{{photo.returnDayMomentGroup.groupName}}</span></p>
                              <img src="../../../resources/images/selected_blue.png"
                                   class="notSelected"
                                   on-click="{{showImage}}"
                                   data-id="{{photo.id}}"
                                   style="width: 40px; height: 40px" >
                            </div>
                           </div>
                          </template>
                        </template>
                        
                        <template if="{{toningCategory}}">
                          <template if="{{!insideGroup}}">
                           <div class="mementoImage">
                            <div on-click="{{showImage}}" data-id="{{photo.id}}">
                              <img src="{{photo.thumbnailToShow.src}}"
                                   class="imageGroupFace image"
                                   title="{{photo.title}}" >
                              <p id="text"><span class="label label-default">{{photo.returnColorGroup.groupName}}</span></p>
                              <img src="../../../resources/images/selected_blue.png"
                                   class="notSelected"
                                   on-click="{{showImage}}"
                                   data-id="{{photo.id}}"
                                   style="width: 40px; height: 40px" >
                            </div>
                           </div>
                          </template>
                        </template>
                      
                        <template if="{{sameCategory}}">
                          <template if="{{!insideGroup}}">
                           <div class="mementoImage">
                            <div on-click="{{showImage}}" data-id="{{photo.id}}">
                              <img src="{{photo.thumbnailToShow.src}}"
                                   class="imageGroupFace image"
                                   title="{{photo.title}}" >
                              <p id="text"><span class="label label-default">{{photo.returnSimilarGroup.giveMeAllPhotos.length}}</span></p>
                              <img src="../../../resources/images/selected_blue.png"
                                   class="notSelected"
                                   on-click="{{showImage}}"
                                   data-id="{{photo.id}}"
                                   style="width: 40px; height: 40px" >
                            </div>
                           </div>
                          </template>
                        </template>
                   
                        <template if="{{!sameCategory && !toningCategory && !facesCategory && !dayMomentCategory}}">
                          <div class="mementoImage">
                            <div class="imageBoard">
                              <img src="{{photo.thumbnailToShow.src}}"
                                   class="image"
                                   title="{{photo.title}}"
                                   on-click="{{showImage}}"
                                   data-id="{{photo.id}}" >
                              <img src="../../../resources/images/selected_blue.png"
                                   class="notSelected"
                                   on-click="{{showImage}}"
                                   data-id="{{photo.id}}"
                                   style="width: 40px; height: 40px" >

                            </div>
                          </div> 
                        </template>

                      </li>                 
                    </template> 
                  </ul>
               </template>
              </section>
           </template>
          </div>
          
          </template>
          
         </div> <!-- / Tabs wrapper --> 
              
       </section>
      </div> <!-- tabs here -->
    </section> <!-- firstSection -->
    
    <section id="bottomZone">   
      <div id="categories">
        <div class="row">
        <div class="col col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <div id="centerText">
            <!-- Faces -->
            <template if="{{facesCategory}}">
                <img src="../../../resources/images/people.png" 
                     on-click="{{facesCategoryExecution}}" id="categorySize"  /> 
            </template>
            <template if="{{!facesCategory}}">
                <img src="../../../resources/images/people_ns.png" 
                     on-click="{{facesCategoryExecution}}" id="categorySize"  /> 
            </template>
            <!-- Faces -->
            <!-- Day Moment  -->
            <template if="{{dayMomentCategory}}">
                <img src="../../../resources/images/time.png" 
                     on-click="{{dayMomentCategoryExecution}}" id="categorySize"  /> 
            </template>
            <template if="{{!dayMomentCategory}}">
                <img src="../../../resources/images/time_ns.png" 
                     on-click="{{dayMomentCategoryExecution}}" id="categorySize"  /> 
            </template>
            <!-- Day Moment -->
            <!-- Toning Photos -->
            <template if="{{toningCategory}}">
                <img src="../../../resources/images/toning.png" 
                     on-click="{{toningCategoryExecution}}" id="categorySize"  /> 
            </template>
            <template if="{{!toningCategory}}">
                <img src="../../../resources/images/toning_ns.png" 
                     on-click="{{toningCategoryExecution}}" id="categorySize"  /> 
            </template>
            <!-- Toning -->
            <!-- Same Photos -->
            <template if="{{sameCategory}}">
                <img src="../../../resources/images/similar.png" 
                     on-click="{{similarCategoryExecution}}" id="categorySize"  /> 
            </template>
            <template if="{{!sameCategory}}">
                <img src="../../../resources/images/similar_ns.png" 
                     on-click="{{similarCategoryExecution}}" id="categorySize"  /> 
            </template>
          </div>
        </div>
       </div>
      </div>

      <div id="screenFooter"> <!-- screen footer -->
       <form class="form-inline" role="form"> <!-- form -->
          <template if="{{!selection}}">
            <div style="float: left" class="btn-group">
              <button type="button" id="Button130"
              on-click="{{enableSelection}}"
                class="btn btn-summary btn-md">Select</button>
            </div>
            <template if="{{summaryContainer.photos.length > 0}}">
              <div style="float: right" class="btn-group">
                <button type="button" on-click="{{exportSummary}}"
                  id="Button130" class="btn btn-summary btn-md">Export
                </button>
              </div>
           </template>
         </template> <!-- normal state -->
    
         <template if="{{selection}}">
          <div class="row">
            <div class="col col-xs-5 col-sm-4 col-md-3 col-lg-1"> 
             
                <template if="{{selectedPhotos.length > 0}}">
                  <div style="float: left" class="btn-group">
                    <button type="button" id="Button130"
                            on-click="{{disableSelection}}"
                            class="btn btn-summary btn-md">Cancel
                    </button>
                  </div>
                </template>
                
                <template if="{{selectedPhotos.length < 1}}">
                  <div style="float: left" class="btn-group">
                    <button type="button" id="Button130"
                            on-click="{{disableSelection}}"
                            class="btn btn-summary btn-md">Done
                    </button>
                  </div>
                </template>
            </div>
            <div class="col col-xs-7 col-sm-8 col-md-9 col-lg-11">
              <template if="{{selectedPhotos.length > 0}}">
                <div id="centerText">
                  <template if="{{!insideGroup && !sameCategory && !toningCategory && !facesCategory && !dayMomentCategory}}"> <!-- hack -->
                  Move <strong>{{selectedPhotos.length}} photos</strong> to
                  </template>
                  <template if="{{sameCategory || toningCategory || facesCategory || dayMomentCategory}}">
                    <template if="{{!insideGroup}}">
                    Move <strong>{{selectedPhotos.length}} groups</strong> to 
                    </template>
                    <template if="{{insideGroup}}">
                    Move <strong>{{selectedPhotos.length}} photos</strong> to 
                    </template>
                  </template>
                  <div class="btn-group">
                    <template if={{currentContainer.equals(summaryContainer)}}>
                      <button type="button" id="Button130"
                              on-click="{{moveToContainer}}"
                              container="STANDBY"
                              class="btn btn-standby-container btn-md buttonMargin">Stand-by
                      </button> 
                      <button type="button" id="Button130"
                              on-click="{{moveToContainer}}"
                              container="EXCLUDED"
                              class="btn btn-excluded-container btn-md buttonMargin">Excluded
                      </button> 
                    </template>
                    <template if={{currentContainer.equals(standbyContainer)}}>
                      <button type="button" id="Button130"
                              on-click="{{moveToContainer}}"
                              container="SUMMARY"
                              class="btn btn-summary-container btn-md buttonMargin">Summary
                      </button> 
                      <button type="button" id="Button130"
                              on-click="{{moveToContainer}}"
                              container="EXCLUDED"
                              class="btn btn-excluded-container btn-md buttonMargin">Excluded
                      </button> 
                    </template>
                    <template if={{currentContainer.equals(excludedContainer)}}>
                      <button type="button" id="Button130"
                              on-click="{{moveToContainer}}"
                              container="SUMMARY"
                              class="btn btn-summary-container btn-md buttonMargin">Summary
                      </button> 
                      <button type="button" id="Button130"
                              on-click="{{moveToContainer}}"
                              container="STANDBY"
                              class="btn btn-standby-container btn-md buttonMargin">Stand-by
                      </button> 
                    </template>
                  </div>
                  container.
                 </div> 
                </template> <!-- container to move -->  
              </div> 
            </div>   
        </template> <!-- select state -->
       </form> <!-- form -->
      </div> <!-- screen footer -->
     </section>
    
      <div id="exportMenu" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h4 id="modalTitle" style="margin: 0">Memento - Export summary</h4>
            </div>
            <div class="modal-body">
                <div id="centerText">     
                      <a><img src="../../../resources/images/own_device.png" 
                      on-click="{{exportToHardDrive}}" id="exportImage" /></a>
                      <br/>
                      <br/>
                      <a><strong on-click="{{exportToHardDrive}}" >Download summary</strong></a>
                      <template if="{{downloading}}">
                        <br/>
                        <br/>
                        <strong>Please wait..</strong>
                        <br/>
                      </template>
                </div>
             </div>
             <div id="modalMargin1" class="modal-footer">
             <template if="{{downloading}}">
              <button class="btn btn-default" data-dismiss="modal">Cancel</button>
             </template>
             <template if="{{!downloading}}">
              <button class="btn btn-default" data-dismiss="modal">Close</button>
             </template>
            </div>
          </div>
        </div>
      </div> <!-- modal -->
  
  </div> <!-- main --> 
</template>
<script type="application/dart" src="summaryManipulation.dart"></script>
<script src="../../../../../packages/browser/dart.js"></script>
<script src="../../../../../packages/browser/exif.js"></script>
<script src="../defaultScreen/jszip.js"></script>
<script src="../defaultScreen/FileSaver.js"></script>
</polymer-element>